{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n// Ваш ключ API\nconst apiKey = '43983774-8711aa48aacb0ae1050be5e44';\n\nexport async function fetchImages(searchQuery, page = 1, perPage = 15) {\n   const url = 'https://pixabay.com/api/';\n\n   const params = {\n      key: apiKey,\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    page: page,\n      per_page: perPage\n    };\n\n    const config = {\n        method: 'get',\n        url: url,\n        params: params,\n        headers: { \n            'Content-Type': 'application/json'\n        }\n    };\n\n    try {\n        const response = await axios(config);\n        return response.data.hits;\n    } catch (error) {\n        console.error('Error fetching images:', error.message);\n        throw error;\n    }\n}\n","//У файлі render-functions.js створи функції для відображення елементів інтерфейсу.\n\n\n// Функция для очистки галереи\nexport function clearGallery() {\n    // Находим элемент галереи на странице\n    const galleryContainer = document.querySelector('.gallery');\n    // Очищаем содержимое галереи\n    galleryContainer.innerHTML = '';\n}\n\n// Функция для отображения изображений в галерее\nexport function renderImages(images) {\n    // находим елемент \n    const galleryContainer = document.querySelector('.gallery');\n\n   const imagesHtml = images.map(image => `\n   <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\">\n   <div class=\"card\">\n   <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n   <div class=\"card-details\">\n   <p>Likes: ${image.likes}</p>\n   <p>Views: ${image.views}</p>\n   <p>Comments: ${image.comments}</p>\n   <p>Downloads: ${image.downloads}</p>\n\n   </div>\n   </div>\n   </a>\n   `).join('');\n\n   galleryContainer.insertAdjacentHTML('beforeend', imagesHtml);\n};\n","import axios from 'axios';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { clearGallery, renderImages } from './js/render-functions.js';\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.getElementById('searchForm');\nconst searchInput = document.getElementById('searchInput');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.getElementById('loadMoreBtn');\nconst lightbox = new SimpleLightbox('.gallery a');\n\n// Зберігаємо значення поточної сторінки та пошукового запиту\nlet currentPage = 1;\nlet currentSearchTerm = '';\nlet totalHits = 0;\n\n// Функція для відображення повідомлення про помилку з використанням iziToast\nfunction showError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: 'topRight',\n    });\n}\n\n// Функція для відображення індикатора завантаження\nfunction showLoader() {\n    loader.classList.add('show');\n}\n\n// Функція для приховування індикатора завантаження\nfunction hideLoader() {\n    loader.classList.remove('show');\n}\n\n// Функція для виконання запиту за додатковими зображеннями\nasync function loadMoreImages() {\n    try {\n        showLoader();\n        currentPage++; // Збільшуємо номер сторінки для отримання наступної групи зображень\n        const images = await fetchImages(currentSearchTerm, currentPage);\n        hideLoader();\n        renderImages(images);\n        lightbox.refresh();\n        // Перевіряємо, чи досягнуто кінця колекції зображень\n        if (gallery.children.length >= totalHits) {\n            loadMoreBtn.style.display = 'none';\n            showError(\"We're sorry, but you've reached the end of search results.\");\n        }\n    } catch (error) {\n        hideLoader();\n        console.error('Error fetching images:', error.message);\n        showError('Failed to fetch more images. Please try again later.');\n    }\n}\n\n// Обробник події кліку на кнопку \"Load more\"\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\n// Обробник події відправки форми\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    const searchTerm = searchInput.value.trim();\n    if (!searchTerm) {\n        showError('Please enter a search term');\n        return;\n    }\n    \n    // Очищаємо галерею та скидаємо поточну сторінку при новому пошуковому запиті\n    currentPage = 1;\n    currentSearchTerm = searchTerm;\n    clearGallery();\n\n    try {\n        showLoader();\n        const images = await fetchImages(searchTerm, currentPage);\n        hideLoader();\n        renderImages(images);\n        lightbox.refresh();\n        // Показуємо кнопку \"Load more\" після отримання результатів запиту\n        loadMoreBtn.style.display = 'block';\n    } catch (error) {\n        hideLoader();\n        console.error('Error fetching images:', error.message);\n        showError('Failed to fetch images. Please try again later.');\n    }\n});\n\n"],"names":["apiKey","fetchImages","searchQuery","page","perPage","config","axios","error","clearGallery","galleryContainer","renderImages","images","imagesHtml","image","searchForm","searchInput","loader","gallery","loadMoreBtn","lightbox","SimpleLightbox","currentPage","currentSearchTerm","totalHits","showError","message","iziToast","showLoader","hideLoader","loadMoreImages","event","searchTerm"],"mappings":"owBAGA,MAAMA,EAAS,qCAER,eAAeC,EAAYC,EAAaC,EAAO,EAAGC,EAAU,GAAI,CAanE,MAAMC,EAAS,CACX,OAAQ,MACR,IAdO,2BAeP,OAbU,CACZ,IAAKL,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACd,KAAMC,EACJ,SAAUC,CAChB,EAMQ,QAAS,CACL,eAAgB,kBACnB,CACT,EAEI,GAAI,CAEA,OADiB,MAAME,EAAMD,CAAM,GACnB,KAAK,IACxB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,EAAM,OAAO,EAC/CA,CACT,CACL,CC9BO,SAASC,GAAe,CAE3B,MAAMC,EAAmB,SAAS,cAAc,UAAU,EAE1DA,EAAiB,UAAY,EACjC,CAGO,SAASC,EAAaC,EAAQ,CAEjC,MAAMF,EAAmB,SAAS,cAAc,UAAU,EAErDG,EAAaD,EAAO,IAAIE,GAAS;AAAA,cAC5BA,EAAM,aAAa;AAAA;AAAA,eAElBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,eAEtCA,EAAM,KAAK;AAAA,eACXA,EAAM,KAAK;AAAA,kBACRA,EAAM,QAAQ;AAAA,mBACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,IAK9B,EAAE,KAAK,EAAE,EAEVJ,EAAiB,mBAAmB,YAAaG,CAAU,CAC9D,CClBA,MAAME,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAW,IAAIC,EAAe,YAAY,EAGhD,IAAIC,EAAc,EACdC,EAAoB,GACpBC,EAAY,EAGhB,SAASC,EAAUC,EAAS,CACxBC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,EACT,SAAU,UAClB,CAAK,CACL,CAGA,SAASE,GAAa,CAClBX,EAAO,UAAU,IAAI,MAAM,CAC/B,CAGA,SAASY,GAAa,CAClBZ,EAAO,UAAU,OAAO,MAAM,CAClC,CAGA,eAAea,GAAiB,CAC5B,GAAI,CACAF,IACAN,IACA,MAAMV,EAAS,MAAMV,EAAYqB,EAAmBD,CAAW,EAC/DO,IACAlB,EAAaC,CAAM,EACnBQ,EAAS,QAAO,EAEZF,EAAQ,SAAS,QAAUM,IAC3BL,EAAY,MAAM,QAAU,OAC5BM,EAAU,4DAA4D,EAE7E,OAAQjB,EAAO,CACZqB,IACA,QAAQ,MAAM,yBAA0BrB,EAAM,OAAO,EACrDiB,EAAU,sDAAsD,CACnE,CACL,CAGAN,EAAY,iBAAiB,QAASW,CAAc,EAGpDf,EAAW,iBAAiB,SAAU,MAAOgB,GAAU,CACnDA,EAAM,eAAc,EAEpB,MAAMC,EAAahB,EAAY,MAAM,KAAI,EACzC,GAAI,CAACgB,EAAY,CACbP,EAAU,4BAA4B,EACtC,MACH,CAGDH,EAAc,EACdC,EAAoBS,EACpBvB,IAEA,GAAI,CACAmB,IACA,MAAMhB,EAAS,MAAMV,EAAY8B,EAAYV,CAAW,EACxDO,IACAlB,EAAaC,CAAM,EACnBQ,EAAS,QAAO,EAEhBD,EAAY,MAAM,QAAU,OAC/B,OAAQX,EAAO,CACZqB,IACA,QAAQ,MAAM,yBAA0BrB,EAAM,OAAO,EACrDiB,EAAU,iDAAiD,CAC9D,CACL,CAAC"}