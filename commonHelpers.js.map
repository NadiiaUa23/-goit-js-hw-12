{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n// Ваш ключ API\nconst apiKey = '43983774-8711aa48aacb0ae1050be5e44';\n\nexport async function fetchImages(searchQuery, page = 1, perPage = 15) {\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        const response = await axios.get(url);\n        return response.data.hits;\n    } catch (error) {\n        console.error('Error fetching images:', error.message);\n        throw error;\n    }\n}","// Функція для очищення галереї\nexport function clearGallery() {\n    // Знаходимо елемент галереї на сторінці\n    const galleryContainer = document.querySelector('.gallery');\n    // Очищуємо вміст галереї\n    galleryContainer.innerHTML = '';\n}\n\n// Функція для відображення зображень в галереї\nexport function renderImages(images) {\n    // Знаходимо елемент галереї\n    const galleryContainer = document.querySelector('.gallery');\n\n    const imagesHtml = images.map(image => `\n        <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\">\n            <div class=\"card\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n                <div class=\"card-details\">\n                    <p>Likes: ${image.likes}</p>\n                    <p>Views: ${image.views}</p>\n                    <p>Comments: ${image.comments}</p>\n                    <p>Downloads: ${image.downloads}</p>\n                </div>\n            </div>\n        </a>\n    `).join('');\n\n    galleryContainer.insertAdjacentHTML('beforeend', imagesHtml);\n}\n","import axios from 'axios';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { clearGallery, renderImages } from './js/render-functions.js';\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.getElementById('searchForm');\nconst searchInput = document.getElementById('searchInput');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.getElementById('loadMoreBtn');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nlet searchTerm = '';\nlet page = 1;\n\n\n// Функція для відображення повідомлення про помилку з використанням iziToast\nfunction showError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: 'topRight',\n    });\n}\n\n// Функція для завантаження наступної сторінки зображень\nasync function loadMoreImages() {\n    loader.classList.add('show'); \n    page++;\n    try {\n        const images = await fetchImages(searchTerm, page);\n        if (images.length === 0) {\n            loadMoreBtn.classList.add('hidden'); // Ховаємо кнопку \"Load more\"\n            showError(\"We're sorry, but you've reached the end of search results.\"); // Виводимо повідомлення\n        } else {\n            renderImages(images);\n            lightbox.refresh();\n            loadMoreBtn.classList.remove('hidden');\n             // Плавне прокручування сторінки\n              const galleryHeight = gallery.getBoundingClientRect().height;\n            window.scrollBy({\n                  top: 1100, // Прокрутити на висоту двох карточок галереї\n                  behavior: 'smooth' // Зробити прокрутку плавною\n             });;\n        } \n    } catch (error) {\n        console.error('Error fetching images:', error.message);\n        showError('Failed to fetch more images. Please try again later.');\n    }\n    finally {\n        loader.classList.remove('show'); // Приховання індикатора завантаження після завантаження зображень\n    }\n}\n\n// Обробник події натискання на кнопку \"Load more\"\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\n\n// Обробник події відправки форми\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    searchTerm = searchInput.value.trim();\n    if (!searchTerm) {\n        showError('Please enter a search term');\n        return;\n    }\n\n    // Показати індикатор завантаження після натискання кнопки\n    loader.classList.add('show');\n    clearGallery();\n\n    try {\n        page = 1; // Скидаємо значення сторінки до початкового при новому пошуковому запиті\n        const images = await fetchImages(searchTerm, page);\n\n        // loader.classList.add('show');\n        // Затримка на 2 секунди перед відображенням результатів\n        setTimeout(() => {\n            // Приховати індикатор завантаження після завершення запиту\n            loader.classList.remove('show');\n\n            if (images.length === 0) {\n                showError('Sorry, there are no images matching your search query. Please try again!');\n            } else {\n                renderImages(images);\n                searchInput.value = '';\n                lightbox.refresh();\n                // Показуємо кнопку \"Load more\" після отримання результатів пошуку\n                loadMoreBtn.classList.remove('hidden');\n            }\n        }, 1000); // 2 секунди затримки\n    } catch (error) {\n        // Приховати індикатор завантаження у випадку помилки\n        loader.classList.remove('show');\n        console.error('Error fetching images:', error.message);\n        showError('Failed to fetch images. Please try again later.');\n    }\n});"],"names":["apiKey","fetchImages","searchQuery","page","perPage","url","axios","error","clearGallery","galleryContainer","renderImages","images","imagesHtml","image","searchForm","searchInput","loader","gallery","loadMoreBtn","lightbox","SimpleLightbox","searchTerm","showError","message","iziToast","loadMoreImages","galleryHeight","event"],"mappings":"owBAEA,MAAMA,EAAS,qCAER,eAAeC,EAAYC,EAAaC,EAAO,EAAGC,EAAU,GAAI,CACnE,MAAMC,EAAM,gCAAgCL,CAAM,MAAME,CAAW,iEAAiEC,CAAI,aAAaC,CAAO,GAE5J,GAAI,CAEA,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,KAAK,IACxB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,EAAM,OAAO,EAC/CA,CACT,CACL,CCbO,SAASC,GAAe,CAE3B,MAAMC,EAAmB,SAAS,cAAc,UAAU,EAE1DA,EAAiB,UAAY,EACjC,CAGO,SAASC,EAAaC,EAAQ,CAEjC,MAAMF,EAAmB,SAAS,cAAc,UAAU,EAEpDG,EAAaD,EAAO,IAAIE,GAAS;AAAA,mBACxBA,EAAM,aAAa;AAAA;AAAA,4BAEVA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,gCAElCA,EAAM,KAAK;AAAA,gCACXA,EAAM,KAAK;AAAA,mCACRA,EAAM,QAAQ;AAAA,oCACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAI9C,EAAE,KAAK,EAAE,EAEVJ,EAAiB,mBAAmB,YAAaG,CAAU,CAC/D,CCdA,MAAME,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAW,IAAIC,EAAe,YAAY,EAEhD,IAAIC,EAAa,GACblB,EAAO,EAIX,SAASmB,EAAUC,EAAS,CACxBC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,EACT,SAAU,UAClB,CAAK,CACL,CAGA,eAAeE,GAAiB,CAC5BT,EAAO,UAAU,IAAI,MAAM,EAC3Bb,IACA,GAAI,CACA,MAAMQ,EAAS,MAAMV,EAAYoB,EAAYlB,CAAI,EACjD,GAAIQ,EAAO,SAAW,EAClBO,EAAY,UAAU,IAAI,QAAQ,EAClCI,EAAU,4DAA4D,MACnE,CACHZ,EAAaC,CAAM,EACnBQ,EAAS,QAAO,EAChBD,EAAY,UAAU,OAAO,QAAQ,EAEnC,MAAMQ,EAAgBT,EAAQ,sBAAqB,EAAG,OACxD,OAAO,SAAS,CACV,IAAK,KACL,SAAU,QACd,CAAA,CACL,CACJ,OAAQV,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,EAAM,OAAO,EACrDe,EAAU,sDAAsD,CACnE,QACO,CACJN,EAAO,UAAU,OAAO,MAAM,CACjC,CACL,CAGAE,EAAY,iBAAiB,QAASO,CAAc,EAIpDX,EAAW,iBAAiB,SAAU,MAAOa,GAAU,CAInD,GAHAA,EAAM,eAAc,EAEpBN,EAAaN,EAAY,MAAM,OAC3B,CAACM,EAAY,CACbC,EAAU,4BAA4B,EACtC,MACH,CAGDN,EAAO,UAAU,IAAI,MAAM,EAC3BR,IAEA,GAAI,CACAL,EAAO,EACP,MAAMQ,EAAS,MAAMV,EAAYoB,EAAYlB,CAAI,EAIjD,WAAW,IAAM,CAEba,EAAO,UAAU,OAAO,MAAM,EAE1BL,EAAO,SAAW,EAClBW,EAAU,0EAA0E,GAEpFZ,EAAaC,CAAM,EACnBI,EAAY,MAAQ,GACpBI,EAAS,QAAO,EAEhBD,EAAY,UAAU,OAAO,QAAQ,EAE5C,EAAE,GAAI,CACV,OAAQX,EAAO,CAEZS,EAAO,UAAU,OAAO,MAAM,EAC9B,QAAQ,MAAM,yBAA0BT,EAAM,OAAO,EACrDe,EAAU,iDAAiD,CAC9D,CACL,CAAC"}